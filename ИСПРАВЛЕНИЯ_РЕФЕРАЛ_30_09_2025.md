# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ - 30.09.2025

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1Ô∏è‚É£ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–ª–∞—Å—å

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ø–æ –∞–¥—Ä–µ—Å—É https://it-mydoc.ru/admin/ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –æ—Ç–≤–µ—á–∞–ª–∞ HTTP 200
- –ù–æ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ä–æ—É—Ç–∏–Ω–≥–∞

#### üîç –ü—Ä–∏—á–∏–Ω–∞:
React Router –Ω–µ –±—ã–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –±–∞–∑–æ–≤—ã–π –ø—É—Ç—å `/admin`, –∏–∑-–∑–∞ —á–µ–≥–æ —Ä–æ—É—Ç–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–ª –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

#### ‚úÖ –†–µ—à–µ–Ω–∏–µ:

**–§–∞–π–ª: `admin/src/App.js`**

```javascript
// –ë—ã–ª–æ:
<Router>
  <Routes>
    <Route path="/login" element={<Login />} />
    <Route path="/" element={<Dashboard />} />
    ...
  </Routes>
</Router>

// –°—Ç–∞–ª–æ:
<Router basename="/admin">
  <Routes>
    <Route path="/login" element={<Login />} />
    <Route path="/" element={<Dashboard />} />
    ...
  </Routes>
</Router>
```

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω prop `basename="/admin"` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Router`.

#### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è: https://it-mydoc.ru/admin/
- ‚úÖ –†–æ—É—Ç–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–æ—Å—Ç—É–ø–Ω—ã

---

### 2Ô∏è‚É£ –ü—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –≤ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
- –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Ä–∞–±–æ—Ç–∞–ª–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 2 —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª—Å—è –ø–æ —Å—Å—ã–ª–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 1
- –ù–æ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 1 –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã–ª –ø—Ä–∏–≥–ª–∞—à–µ–Ω

#### üîç –ü—Ä–∏—á–∏–Ω–∞:
–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ –ù–ï –û–ë–†–ê–ë–ê–¢–´–í–ê–õ–°–Ø. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–Ω–∏–º–∞–ª–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é, –Ω–æ –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∞ —Å–≤—è–∑—å –º–µ–∂–¥—É –ø—Ä–∏–≥–ª–∞—Å–∏–≤—à–∏–º –∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

#### ‚úÖ –†–µ—à–µ–Ω–∏–µ:

##### –®–∞–≥ 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è –≤ —Å—Ö–µ–º—É

**–§–∞–π–ª: `backend/schemas.py`**

```python
class UserCreate(UserBase):
    password: str
    referral_code: Optional[str] = None  # –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
```

##### –®–∞–≥ 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–§–∞–π–ª: `backend/routers/auth.py`**

```python
# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω
if user_data.referral_code:
    from models import ReferralCode, ReferralEvent, ReferralEventType
    
    referral_code = db.query(ReferralCode).filter(
        ReferralCode.code == user_data.referral_code,
        ReferralCode.is_active == True
    ).first()
    
    if referral_code and referral_code.user_id != new_user.id:
        # –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è "registration"
        event = ReferralEvent(
            referral_code_id=referral_code.id,
            referred_user_id=new_user.id,
            event_type=ReferralEventType.REGISTRATION,
            processed=False
        )
        db.add(event)
        
        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞
        referral_code.total_referrals += 1
        
        db.commit()
        logger.info(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {new_user.email} –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–º—É –∫–æ–¥—É {user_data.referral_code}")
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥:**
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ –¥–∞–Ω–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
2. –ò—â–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ –≤ –ë–î
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–¥
4. –°–æ–∑–¥–∞–µ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ —Ç–∏–ø–∞ `REGISTRATION`
5. –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫ `total_referrals` —É —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞
6. –õ–æ–≥–∏—Ä—É–µ—Ç —É—Å–ø–µ—à–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é

##### –®–∞–≥ 3: –ü–µ—Ä–µ–¥–∞—á–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞ –∏–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

**–§–∞–π–ª: `frontend/src/pages/Register.js`**

```javascript
import { useSearchParams } from 'react-router-dom';

export default function Register() {
  const [searchParams] = useSearchParams();
  const referralCode = searchParams.get('ref');
  
  const [formData, setFormData] = useState({
    full_name: '',
    email: '',
    phone: '',
    password: '',
    confirmPassword: '',
    referral_code: referralCode || '',
  });
  
  // ...
  
  const result = await register({
    full_name: formData.full_name,
    email: formData.email,
    phone: formData.phone,
    password: formData.password,
    referral_code: formData.referral_code || undefined,
  });
}
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥:**
1. –ò–∑–≤–ª–µ–∫–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `ref` –∏–∑ URL (`?ref=REF-V19VWR8B`)
2. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Ñ–æ—Ä–º—ã
3. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ
4. –ü–µ—Ä–µ–¥–∞–µ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

##### –®–∞–≥ 4: –í–∏–∑—É–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

```javascript
{referralCode && (
  <Alert severity="success" sx={{ mt: 2 }}>
    üéâ –í—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç–µ—Å—å –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ! 
    –ö–æ–¥: <strong>{referralCode}</strong>
  </Alert>
)}
```

#### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:

**–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
```bash
# 1. –ü–æ–ª—É—á–∏–ª–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 1
REF_CODE = "REF-V19VWR8B"

# 2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 2 —Å —ç—Ç–∏–º –∫–æ–¥–æ–º
Email: test-user-2@example.com
Referral Code: REF-V19VWR8B

# 3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 1 –æ–±–Ω–æ–≤–∏–ª–∞—Å—å:
{
    "total_referrals": 1,
    "successful_referrals": 0,
    "pending_referrals": 1,
    "total_revenue": 0.0,
    "total_rewards": 0.0,
    "conversion_rate": 0.0,
    "referral_code": "REF-V19VWR8B"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ `total_referrals` = 1 (–æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω)
- ‚úÖ `pending_referrals` = 1 (–æ–∂–∏–¥–∞–µ—Ç –ø–µ—Ä–≤–æ–≥–æ –≤–∏–∑–∏—Ç–∞)
- ‚úÖ –°–æ–±—ã—Ç–∏–µ `REGISTRATION` —Å–æ–∑–¥–∞–Ω–æ –≤ –ë–î
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ

---

## üìã –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### Backend:

1. **`backend/schemas.py`**
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `referral_code: Optional[str] = None` –≤ –∫–ª–∞—Å—Å `UserCreate`

2. **`backend/routers/auth.py`**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `register()`
   - –°–æ–∑–¥–∞–Ω–∏–µ `ReferralEvent` –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ `total_referrals`
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π

### Frontend:

3. **`frontend/src/pages/Register.js`**
   - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `useSearchParams`
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `ref` –∏–∑ URL
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ `referral_code` –≤ –¥–∞–Ω–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - –í–∏–∑—É–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### Admin:

4. **`admin/src/App.js`**
   - –î–æ–±–∞–≤–ª–µ–Ω `basename="/admin"` –≤ `Router`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ä–æ—É—Ç–∏–Ω–≥ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø–æ –ø—É—Ç–∏ `/admin/`

---

## üß™ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –¢–µ—Å—Ç 1: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
https://it-mydoc.ru/admin/

# –í–æ–π–¥–∏—Ç–µ
Email: admin@it-mydoc.ru
–ü–∞—Ä–æ–ª—å: admin123

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ
‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
‚úÖ –†–æ—É—Ç–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Ä–∞–∑–¥–µ–ª–∞–º–∏
```

### –¢–µ—Å—Ç 2: –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

**–®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥**
```bash
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://it-mydoc.ru
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ patient@it-mydoc.ru / patient123
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞"
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: https://it-mydoc.ru/register?ref=REF-V19VWR8B)
```

**–®–∞–≥ 2: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
```bash
1. –í—ã–π–¥–∏—Ç–µ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ
3. –í—ã —É–≤–∏–¥–∏—Ç–µ –∑–µ–ª–µ–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "üéâ –í—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç–µ—Å—å –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ!"
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
   - –ò–º—è: –¢–µ—Å—Ç–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
   - Email: test@example.com
   - –ü–∞—Ä–æ–ª—å: test123
5. –ù–∞–∂–º–∏—Ç–µ "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"
```

**–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É**
```bash
1. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ –ø–µ—Ä–≤–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É (patient@it-mydoc.ru)
2. –û—Ç–∫—Ä–æ–π—Ç–µ "–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞"
3. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
   ‚úÖ "–í—Å–µ–≥–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–æ" = 1
   ‚úÖ "–û–∂–∏–¥–∞—é—Ç –ø–µ—Ä–≤–æ–≥–æ –≤–∏–∑–∏—Ç–∞" = 1
```

---

## üí° –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ä–µ—Ñ–µ—Ä–∞–ª–∞:

```
1. –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø (REGISTRATION)
   ‚Üì
   total_referrals += 1
   pending_referrals += 1
   
2. –ü–ï–†–í–´–ô –í–ò–ó–ò–¢ (FIRST_VISIT) 
   ‚Üì
   successful_referrals += 1
   pending_referrals -= 1
   –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º
   
3. –ü–û–ö–£–ü–ö–ê (PURCHASE)
   ‚Üì
   total_revenue += —Å—É–º–º–∞ –ø–æ–∫—É–ø–∫–∏
   –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º
```

### –¢–∏–ø—ã —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π:

- **REGISTRATION** - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **FIRST_VISIT** - –ü–µ—Ä–≤—ã–π –≤–∏–∑–∏—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **REPEAT_VISIT** - –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤–∏–∑–∏—Ç
- **PURCHASE** - –ü–æ–∫—É–ø–∫–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π:

–í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `reward_rules`:

```sql
INSERT INTO reward_rules (event_type, reward_type, reward_value, min_transaction_amount, is_active)
VALUES 
  ('REGISTRATION', 'POINTS', 100, NULL, true),      -- 100 –±–∞–ª–ª–æ–≤ –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
  ('FIRST_VISIT', 'POINTS', 500, NULL, true),       -- 500 –±–∞–ª–ª–æ–≤ –∑–∞ –ø–µ—Ä–≤—ã–π –≤–∏–∑–∏—Ç
  ('PURCHASE', 'PERCENTAGE', 5, 1000, true);        -- 5% –æ—Ç –ø–æ–∫—É–ø–∫–∏ –æ—Ç 1000‚ÇΩ
```

---

## ‚úÖ –ò—Ç–æ–≥–∏

**–û–±–µ –ø—Ä–æ–±–ª–µ–º—ã —É—Å–ø–µ—à–Ω–æ —Ä–µ—à–µ–Ω—ã:**

1. ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. ‚úÖ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞
3. ‚úÖ –ü—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ
4. ‚úÖ –í—Å–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –ë–î
5. ‚úÖ Frontend –∏ Backend –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

---

*–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π: 30 —Å–µ–Ω—Ç—è–±—Ä—è 2025 –≥–æ–¥–∞*
*–í—Ä–µ–º—è: 08:10 UTC*
